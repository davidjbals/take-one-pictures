<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TakeOne – Film & Content</title>
  <meta name="description" content="TakeOne – Film, Regieassistenz, Kurzfilm, Content. Minimal, schnell, präzise." />
  <meta name="color-scheme" content="light" />

  <!-- Vimeo: schneller Start -->
  <link rel="dns-prefetch" href="//player.vimeo.com">
  <link rel="dns-prefetch" href="//i.vimeocdn.com">
  <link rel="dns-prefetch" href="//f.vimeocdn.com">
  <link rel="preconnect" href="https://player.vimeo.com" crossorigin>
  <link rel="preconnect" href="https://i.vimeocdn.com" crossorigin>
  <link rel="preconnect" href="https://f.vimeocdn.com" crossorigin>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/takeOnelogo.png" />
  <link rel="shortcut icon" type="image/png" href="assets/takeOnelogo.png" />

  <script>
    if ("scrollRestoration" in window.history) window.history.scrollRestoration = "manual";
    window.scrollTo(0, 0);
    window.addEventListener("pageshow", (event) => { if (event.persisted) window.scrollTo(0, 0); });
  </script>

  <!-- Vimeo Player API -->
  <script src="https://player.vimeo.com/api/player.js"></script>

  <style>
    :root{
      --bg:#f9fafb;
      --fg:#0f172a;
      --muted:#6b7280;
      --border:#d1d5db;
      --radius:18px;
      --shadow:0 18px 50px rgba(15,23,42,.12);
      --header:#ffffff;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    *{margin:0;padding:0;box-sizing:border-box}

    html{
      scroll-behavior:smooth;
      background:var(--bg);
      -webkit-font-smoothing:antialiased;
    }

    body{
      font-family:var(--font);
      color:var(--fg);
      background:var(--bg);
      min-height:100vh;
      overflow-x:hidden;
      position:relative;
    }

    body.locked{ overflow:hidden; }

    a{color:inherit;text-decoration:none}

    .container{width:min(1200px,calc(100% - 2rem));margin-inline:auto}

    .visually-hidden{
      position:absolute;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }

    a:focus-visible,
    button:focus-visible{
      outline:2px solid #111827;
      outline-offset:3px;
    }

    section[id]{ scroll-margin-top:80px; }

    /* Intro Screen */
    #intro-screen{
      position:fixed;
      inset:0;
      background:#020617;
      color:#f9fafb;
      z-index:3200;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      transition:opacity .35s ease, visibility .35s ease, transform .35s ease;
    }

    #intro-screen.hidden{
      opacity:0;
      visibility:hidden;
      transform:scale(1.01);
      pointer-events:none;
    }

    .intro-inner{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:1rem;
    }

    .intro-title{
      font-size:2rem;
      font-weight:900;
      letter-spacing:.32em;
      text-transform:uppercase;
    }

    .intro-sub{
      font-size:.85rem;
      letter-spacing:.24em;
      text-transform:uppercase;
      opacity:.75;
    }

    #intro-start{
      padding:.9rem 2.8rem;
      border:none;
      border-radius:999px;
      background:#f9fafb;
      color:#020617;
      font-weight:800;
      letter-spacing:.25em;
      text-transform:uppercase;
      cursor:pointer;
      box-shadow:0 18px 55px rgba(0,0,0,.65);
      transition:transform .2s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
    }

    #intro-start:hover{
      transform:translateY(-2px);
      box-shadow:0 26px 70px rgba(0,0,0,.8);
      background:#020617;
      color:#f9fafb;
    }

    #intro-screen.loading .intro-inner{ display:none; }
    #intro-screen.loading .intro-loader{ display:flex; }

    .intro-loader{
      display:none;
      align-items:center;
      justify-content:center;
      margin-top:1.4rem;
    }

    .circle-loader{
      --progress:0;
      width:68px;
      height:68px;
      border-radius:50%;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.85rem;
      font-weight:800;
      letter-spacing:.12em;
      color:#f9fafb;
      text-transform:uppercase;
      background:conic-gradient(
        from -90deg,
        #f9fafb 0deg,
        #f9fafb calc(var(--progress) * 3.6deg),
        rgba(249,250,251,.18) calc(var(--progress) * 3.6deg),
        rgba(249,250,251,.18) 360deg
      );
      filter:drop-shadow(0 4px 18px rgba(0,0,0,.45));
      transition:background .2s ease;
    }

    .circle-loader::after{
      content:"";
      position:absolute;
      inset:10px;
      border-radius:50%;
      background:#020617;
      z-index:0;
    }

    .circle-loader span{
      position:relative;
      z-index:1;
      font-variant-numeric:tabular-nums;
    }

    /* ===========================
       NAV / HEADER (FIXED LAYERING)
       =========================== */
    header{
      position:fixed;
      top:0;left:0;right:0;
      z-index:5000;
      isolation:isolate;
      background:transparent;
      backdrop-filter:saturate(160%) blur(18px);
      border-bottom:none;
      box-shadow:none;
      transition:background .22s ease, box-shadow .22s ease, border-color .22s ease;
    }

    body.locked header,
    body.locked .menu-panel{
      opacity:0;
      pointer-events:none;
    }

    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:.6rem 0;
      position:relative;
      z-index:1;
    }

    .brand{
      font-weight:900;
      letter-spacing:.18em;
      font-size:.9rem;
      text-transform:uppercase;
      color:#f9fafb;
      text-shadow:0 1px 6px rgba(0,0,0,0.7);
      transition:color .22s ease, text-shadow .22s ease;
      white-space:nowrap;
    }

    .menu-inline{
      display:flex;
      gap:1.4rem;
      align-items:center;
    }

    .menu-inline a{
      font-weight:700;
      text-transform:uppercase;
      font-size:.78rem;
      padding:.35rem .75rem;
      border-radius:999px;
      color:#f9fafb;
      text-shadow:0 1px 6px rgba(0,0,0,0.9);
      transition:background .18s ease,color .18s ease, box-shadow .18s ease, text-shadow .18s ease;
      white-space:nowrap;
    }

    .menu-inline a:hover{
      background:rgba(15,23,42,0.98);
      color:#f9fafb;
      box-shadow:0 14px 35px rgba(0,0,0,.8);
    }

    .menu-dots{
      position:relative;
      display:flex;
      align-items:center;
    }

    .menu-dots button{
      border:none;
      background:rgba(15,23,42,0.25);
      color:#f9fafb;
      border-radius:999px;
      padding:.32rem .85rem;
      font-weight:700;
      letter-spacing:.35em;
      cursor:pointer;
      transition:background .18s ease, box-shadow .18s ease;
      font-size:.75rem;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:.35rem;
    }

    .menu-dots button:hover,
    .menu-dots button:focus-visible{
      background:rgba(15,23,42,0.95);
      box-shadow:0 14px 35px rgba(0,0,0,.8);
      color:#f9fafb;
    }

    .menu-dots-menu{
      position:absolute;
      top:calc(100% + 6px);
      right:0;
      min-width:170px;
      background:#ffffff;
      border:1px solid rgba(229,231,235,1);
      border-radius:14px;
      box-shadow:0 18px 40px rgba(15,23,42,.2);
      display:flex;
      flex-direction:column;
      opacity:0;
      pointer-events:none;
      transform:translateY(-6px);
      transition:opacity .18s ease, transform .18s ease;
      z-index:60;
    }

    .menu-dots-icon{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .menu-dots-icon span{
      width:4px;
      height:4px;
      border-radius:50%;
      background:#f9fafb;
      display:block;
    }

    .menu-dots-menu a{
      padding:.6rem 1rem;
      font-size:.72rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#0f172a;
      border-bottom:1px solid rgba(229,231,235,1);
      text-shadow:none;
    }
    .menu-dots-menu a:last-child{ border-bottom:none; }

    .menu-dots-menu a:hover{
      background:rgba(15,23,42,0.08);
      color:#0f172a;
    }

    .menu-dots.is-open .menu-dots-menu{
      opacity:1;
      pointer-events:auto;
      transform:translateY(0);
    }

    .menu-toggle{
      display:none;
      align-items:center;
      justify-content:center;
      gap:.4rem;
      padding:.35rem .6rem;
      border-radius:999px;
      border:none;
      background:transparent;
      cursor:pointer;
      transition:background .18s ease, box-shadow .18s ease;
    }

    .menu-toggle-label{
      font-size:.72rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      font-weight:700;
    }

    .menu-toggle-icon{
      width:18px;height:14px;
      position:relative;
    }

    .menu-toggle-icon span{
      position:absolute;
      left:0; right:0;
      height:2px;
      border-radius:999px;
      transition:transform .2s ease,opacity .2s ease, top .2s ease, background-color .2s ease;
    }

    .menu-toggle-icon span:nth-child(1){top:0;}
    .menu-toggle-icon span:nth-child(2){top:6px;}
    .menu-toggle-icon span:nth-child(3){top:12px;}

    .menu-toggle-label,
    .menu-toggle-icon span{
      background:#f9fafb;
      color:#f9fafb;
    }

    .menu-toggle:hover{
      background:rgba(15,23,42,0.9);
      box-shadow:0 12px 35px rgba(0,0,0,.7);
    }

    .menu-panel{
      position:fixed;
      top:60px;
      left:0; right:0;
      padding:1rem 1.2rem 1.4rem 1.2rem;
      background:#f9fafb;
      box-shadow:0 18px 55px rgba(15,23,42,.25);
      border-bottom:1px solid rgba(209,213,219,1);
      display:flex;
      flex-direction:column;
      gap:.6rem;
      opacity:0;
      pointer-events:none;
      transform:translateY(-8px);
      transition:opacity .18s ease, transform .18s ease;
      z-index:25;
    }

    .menu-panel a{
      font-weight:700;
      text-transform:uppercase;
      font-size:.76rem;
      letter-spacing:.18em;
      padding:.6rem .2rem;
      border-bottom:1px solid rgba(229,231,235,1);
      color:#0f172a;
      white-space:nowrap;
    }
    .menu-panel a:last-child{ border-bottom:none; }

    header.menu-open .menu-panel{
      opacity:1;
      pointer-events:auto;
      transform:translateY(0);
    }

    /* HERO */
    .hero{
      position:relative;
      width:100%;
      height:100vh;
      min-height:100vh;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      margin-top:0;
      padding:0;
      background:#020617;
      z-index:0;
    }

    .hero::after{
      content:"";
      position:absolute;
      inset:0;
      background:transparent;
      z-index:1;
      mix-blend-mode:normal;
    }

    .hero-content{
      position:relative;
      z-index:2;
      max-width:640px;
      padding:80px 1rem;
    }

    .hero h1{
      font-size:clamp(3rem,8vw,5rem);
      font-weight:1000;
      text-transform:uppercase;
      letter-spacing:.3em;
      color:#f9fafb;
      text-shadow:0 3px 22px rgba(0,0,0,0.95);
    }

    .sub{
      margin-top:1.1rem;
      font-weight:700;
      letter-spacing:.25em;
      text-transform:uppercase;
      opacity:.96;
      color:#e5e7eb;
      text-shadow:0 2px 12px rgba(0,0,0,0.95);
      font-size:.8rem;
    }

    .cta{
      margin-top:2.4rem;
      padding:1rem 2.1rem;
      border-radius:999px;
      border:1px solid #f9fafb;
      background:#f9fafb;
      font-weight:800;
      color:#111827;
      display:inline-flex;
      font-size:.8rem;
      letter-spacing:.2em;
      text-transform:uppercase;
      transition:background .18s ease,color .18s ease,border-color .18s ease, box-shadow .18s ease, transform .18s ease;
      box-shadow:0 18px 45px rgba(0,0,0,.8);
      white-space:nowrap;
    }

    .cta:hover{
      background:#111827;
      color:#f9fafb;
      border-color:#111827;
      box-shadow:0 24px 70px rgba(0,0,0,.95);
      transform:translateY(-1px);
    }

    /* Vimeo Hero Background */
    .hero-vimeo{
      position:absolute;
      inset:0;
      z-index:0;
      pointer-events:none;
      overflow:hidden;
      background:#020617;
    }

    .hero-poster{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      transform:scale(1.06);
      filter:contrast(1.05) saturate(1.05);
      transition:opacity .55s ease;
      z-index:-1;
    }

    .hero-vimeo iframe{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%) scale(1.12);
      transform-origin:center;
      width:max(100%, calc(100vh * 16 / 9));
      height:max(100%, calc(100vw * 9 / 16));
      border:0;
      z-index:-2;
      opacity:0;
      transition:opacity .35s ease;
    }

    .hero-vimeo.is-playing iframe{ opacity:1; }
    .hero-vimeo.is-playing .hero-poster{ opacity:0; }

    section{padding:3rem 0;}
    .h3{ font-size:1.35rem; font-weight:900; margin-bottom:.6rem; }
    .muted{ color:var(--muted); line-height:1.6; font-size:1rem; }

    #about{
      min-height:100vh;
      display:flex;
      align-items:center;
      position:relative;
      padding:4rem 0 4.5rem 0;
      background:var(--bg);
      border-top:none;
    }

    .about-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:2.5rem;
    }

    #about .tile{
      background:transparent;
      border:none;
      box-shadow:none;
      border-radius:0;
      padding:0 0 1.8rem 0;
      cursor:default;
      position:relative;
      transform:none;
    }

    #about .tile::after{
      content:"";
      position:absolute;
      left:0;
      bottom:0;
      width:72px;
      height:2px;
      background:#9ca3af;
      opacity:.7;
    }

    #about .h3{
      font-size:.95rem;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:#111827;
      margin-bottom:.9rem;
    }

    #about .muted{ font-size:1.02rem; color:#4b5563; }

    #about .tile:hover{ transform:translateY(-3px); }
    #about .tile:hover .h3{ color:#111827; }
    #about .tile:hover .muted{ color:#374151; }

    .tile[data-ignore-click="true"]{ cursor:default; }

    /* Reel Slider (Bilder bleiben) */
    #reel{
      position:relative;
      background:var(--bg);
      margin-top:-6rem;
      padding:2.2rem 0 2.2rem 0;
    }

    .reel-inner{ display:flex; align-items:center; gap:.75rem; }

    .reel-frame{
      flex:1;
      position:relative;
      border-radius:14px;
      overflow:hidden;
      background:transparent;
      border:none;
      box-shadow:none;
      aspect-ratio:16/9;
      max-width:900px;
      margin-inline:auto;
    }

    .reel-track{
      position:absolute;
      inset:0;
      display:flex;
      transition:transform .4s ease-out;
      will-change:transform;
    }

    .reel-slide{
      flex:0 0 100%;
      position:relative;
      cursor:pointer;
    }

    .reel-media{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .reel-arrow{
      border:none;
      background:rgba(15,23,42,0.7);
      color:#f9fafb;
      width:34px;
      height:34px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1rem;
      cursor:pointer;
      flex-shrink:0;
      transition:background .16s ease, box-shadow .16s ease, transform .16s ease, opacity .16s ease;
      opacity:.95;
    }

    .reel-arrow:hover{
      background:rgba(15,23,42,0.95);
      box-shadow:0 18px 55px rgba(0,0,0,.85);
      transform:translateY(-1px);
    }

    .reel-caption{
      margin-top:1rem;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:1.5rem;
      font-size:.85rem;
      color:#6b7280;
    }

    .reel-label{
      letter-spacing:.22em;
      text-transform:uppercase;
      font-weight:700;
      opacity:.8;
      text-align:center;
    }

    .reel-title{
      font-size:1rem;
      color:#111827;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      text-align:center;
    }

    #work{
      position:relative;
      background:var(--bg);
      margin-top:6.5rem;
      padding:4rem 0 3.5rem 0;
    }

    .cards{
      display:grid;
      gap:2.4rem;
      grid-template-columns:repeat(2,minmax(0,1fr));
    }

    #work .tile{
      padding:0 0 1.8rem 0;
      position:relative;
      cursor:pointer;
      transition:transform .22s ease, box-shadow .22s ease;
    }

    #work .tile:hover{ transform:translateY(-4px); }

    .thumb{
      position:relative;
      aspect-ratio:4/3;
      border-radius:18px;
      overflow:hidden;
      background:#e5e7eb;
      box-shadow:var(--shadow);
      transform:translateZ(0);
    }

    #work .tile:hover .thumb{
      box-shadow:0 26px 80px rgba(15,23,42,.18);
    }

    /* Vimeo thumbs */
    .thumb .thumb-vimeo{
      position:absolute;
      top:50%;
      left:50%;
      width:max(100%, calc(100% * 16 / 9));
      height:max(100%, calc(100% * 9 / 16));
      transform:translate(-50%, -50%);
      border:0;
      display:block;
      pointer-events:none;
    }

    .thumb-img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      pointer-events:none;
    }

    .tile[data-hover-autoplay="true"] .thumb-play{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      z-index:3;
    }
    .tile[data-type="vimeo"] .thumb-play{
      opacity:0;
      transition:opacity .18s ease;
    }

    .tile[data-type="vimeo"]:hover .thumb-play{
      opacity:1;
    }

    .tile[data-hover-autoplay="true"] .thumb-play span{
      width:54px;
      height:54px;
      border-radius:50%;
      border:2px solid rgba(249,250,251,.85);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#f9fafb;
      font-size:1.2rem;
      background:rgba(2,6,23,.55);
      box-shadow:0 14px 32px rgba(0,0,0,.35);
    }

    .tile[data-hover-autoplay="true"] .thumb:hover .thumb-play span{
      background:rgba(2,6,23,.8);
      transform:scale(1.03);
    }

    .slider-arrow{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:38px;
      height:38px;
      border:none;
      border-radius:999px;
      background:rgba(15,23,42,0.72);
      color:#f9fafb;
      font-size:20px;
      cursor:pointer;
      z-index:5;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:background .16s ease, transform .16s ease;
    }
    .slider-arrow:hover{
      background:rgba(15,23,42,0.95);
      transform:translateY(-50%) scale(1.03);
    }
    .slider-prev{ left:12px; }
    .slider-next{ right:12px; }

    .body{ padding:1rem 0 0 0; }

    .body .h3{
      font-size:.95rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      margin-bottom:.4rem;
      white-space:nowrap;
    }

    #contact{
      position:relative;
      overflow:hidden;
      padding:2.5rem 0;
      margin-top:3rem;
      border-top:1px solid var(--border);
      background:#e5e7eb;
    }

    .contact-bar{
      position:relative;
      z-index:2;
      padding:.7rem 0;
      display:flex;
      justify-content:center;
      gap:2rem;
      font-size:.9rem;
      color:#4b5563;
    }

    .contact-bar a{ text-decoration:underline; }

    footer{
      border-top:1px solid var(--border);
      background:#e5e7eb;
    }

    .footer-bar{
      padding:.5rem 0;
      display:flex;
      justify-content:center;
      font-size:.85rem;
      color:#6b7280;
    }

    .modal{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.92);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:100;
    }

    .modal.hidden{ display:none; }

    .modal-inner{
      width:min(1100px,100%);
      padding:1.5rem;
    }

    .modal-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:1rem;
      color:#e5e7eb;
      font-size:.95rem;
    }

    .modal-title{
      font-weight:700;
      letter-spacing:.12em;
      text-transform:uppercase;
      white-space:nowrap;
    }

    .modal-close{
      border:none;
      background:transparent;
      color:#e5e7eb;
      font-size:1.6rem;
      cursor:pointer;
      padding:.2rem .4rem;
      line-height:1;
    }

    #modal-vimeo,
    #modal-image{
      width:100%;
      height:min(80vh, 720px);
    }

    #modal-image{
      object-fit:contain;
      display:none;
      background:#000;
    }

    .modal-media{
      position:relative;
      border-radius:14px;
      overflow:hidden;
      background:#000;
    }

    .modal-nav{
      display:none;
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:46px;
      height:46px;
      border-radius:999px;
      border:none;
      background:rgba(15,23,42,.72);
      color:#f9fafb;
      font-size:1.6rem;
      cursor:pointer;
      align-items:center;
      justify-content:center;
      transition:background .2s ease, transform .2s ease;
      z-index:2;
    }

    .modal-nav:hover{
      background:rgba(15,23,42,.92);
      transform:translateY(-50%) scale(1.05);
    }

    .modal-nav.modal-prev{ left:12px; }
    .modal-nav.modal-next{ right:12px; }

    .modal.has-image-slider .modal-nav{ display:flex; }

    header.nav-compact{
      background:rgba(249,250,251,0.96);
      border-bottom:1px solid rgba(209,213,219,1);
      box-shadow:0 10px 30px rgba(15,23,42,.10);
    }

    header.nav-compact .brand{
      color:#0f172a;
      text-shadow:none;
    }

    header.nav-compact .menu-inline{ display:flex; }

    header.nav-compact .menu-inline a{
      color:#0f172a;
      text-shadow:none;
      background:transparent;
      box-shadow:none;
    }

    header.nav-compact .menu-inline a:hover{
      background:rgba(15,23,42,0.06);
      color:#0f172a;
      box-shadow:none;
    }

    header.nav-compact .menu-toggle-label{ color:#0f172a; }
    header.nav-compact .menu-toggle-icon span{ background:#0f172a; }

    header.nav-compact .menu-toggle:hover{
      background:rgba(15,23,42,0.06);
      box-shadow:0 8px 22px rgba(15,23,42,.16);
    }

    header.menu-open .menu-toggle-icon span:nth-child(1){
      top:6px;
      transform:rotate(45deg);
    }
    header.menu-open .menu-toggle-icon span:nth-child(2){ opacity:0; }
    header.menu-open .menu-toggle-icon span:nth-child(3){
      top:6px;
      transform:rotate(-45deg);
    }

    @media(max-width:980px){
      .cards{grid-template-columns:1fr 1fr}
      .about-grid{grid-template-columns:1fr 1fr}
      .reel-inner{ gap:.6rem; }
      .reel-arrow{ width:38px; height:38px; }
    }

    @media(max-width:640px){
      .cards{grid-template-columns:1fr}
      .about-grid{grid-template-columns:1fr}

      .nav{gap:.4rem;}
      .brand{font-size:.78rem; letter-spacing:.14em;}
      .menu-inline{
        gap:.7rem;
        padding-bottom:.15rem;
        flex-wrap:nowrap;
        overflow-x:auto;
        scrollbar-width:none;
        -webkit-overflow-scrolling:touch;
      }
      .menu-inline::-webkit-scrollbar{ display:none; }
      .menu-inline a{
        font-size:.72rem;
        letter-spacing:.14em;
        padding:.25rem .55rem;
        white-space:nowrap;
      }

      .menu-dots{
        position:static;
      }
      .menu-dots button{
        letter-spacing:.4em;
      }
      .menu-dots-menu{
        position:fixed;
        top:70px;
        left:50%;
        right:auto;
        transform:translateX(-50%);
        min-width:min(320px, calc(100vw - 32px));
        width:auto;
        z-index:5000;
        opacity:0;
        pointer-events:none;
      }
      .menu-dots.is-open .menu-dots-menu{
        opacity:1;
        pointer-events:auto;
      }

      .menu-toggle{display:none;}
      header.nav-compact .menu-toggle{display:none;}

      .contact-bar{flex-direction:column;gap:.3rem;}
      .modal-inner{padding:1rem;}
      .hero h1{letter-spacing:.18em;}
      .sub{letter-spacing:.18em;}

      .reel-inner{ align-items:stretch; }
      .reel-arrow{ align-self:center; }
      .reel-caption{ flex-direction:column; align-items:center; text-align:center; }
      .reel-title{ white-space:normal; text-align:center; }
    }
  </style>
</head>

<body class="locked">

<!-- Intro Screen -->
<div id="intro-screen" aria-hidden="false">
  <div class="intro-inner">
    <div class="intro-title">TakeOne</div>
    <div class="intro-sub">Film • Content • Image</div>
    <button id="intro-start" type="button">Seite starten</button>
  </div>
  <div class="intro-loader" aria-hidden="true">
    <div class="circle-loader" role="status" aria-label="Lädt">
      <span id="loader-progress">0%</span>
    </div>
  </div>
</div>

<header>
  <div class="container nav">
    <div class="brand">TAKEONE</div>

    <!-- Desktop-Menü -->
    <nav class="menu-inline">
      <a href="#work">Projekte</a>
      <a href="#about">Über uns</a>
      <a href="kontakt.html">Kontakt</a>
      <div class="menu-dots">
        <button type="button" aria-haspopup="true" aria-expanded="false">
          <span class="menu-dots-icon" aria-hidden="true"><span></span><span></span><span></span></span>
          <span class="visually-hidden">Mehr</span>
        </button>
        <div class="menu-dots-menu" role="menu">
          <a href="impressum.html">Impressum</a>
          <a href="datenschutz.html">Datenschutz</a>
        </div>
      </div>
    </nav>

    <!-- Hamburger (wird auf Mobile NACH dem Hero sichtbar) -->
    <button class="menu-toggle" type="button" aria-label="Menü öffnen" aria-expanded="false">
      <span class="menu-toggle-label">Menü</span>
      <div class="menu-toggle-icon">
        <span></span><span></span><span></span>
      </div>
    </button>
  </div>

  <!-- Dropdown-Panel für Hamburger -->
  <div class="menu-panel" id="menu-panel">
    <a href="#work">Projekte</a>
    <a href="#about">Über uns</a>
    <a href="kontakt.html">Kontakt</a>
    <a href="impressum.html">Impressum</a>
    <a href="datenschutz.html">Datenschutz</a>
  </div>
</header>

<main>
  <section class="hero">
    <div class="hero-vimeo" id="hero-media">
      <img class="hero-poster" src="assets/hero-poster.jpg" alt="" aria-hidden="true" />
      <iframe
        id="vimeo-hero"
        src="https://player.vimeo.com/video/1145941275?background=1&autoplay=1&muted=1&loop=1&byline=0&title=0&portrait=0&dnt=1&playsinline=1&autopause=0"
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
        title="TakeOne Hero Background Video"
      ></iframe>
    </div>

    <div class="hero-content">
      <h1>TakeOne</h1>
      <div class="sub">Content • Imagefilm • Marketing</div>
      <a class="cta" href="#work">Was wir können?</a>
    </div>
  </section>

  <section id="about" aria-labelledby="about-heading">
    <div class="container">
      <h2 id="about-heading" class="visually-hidden">Über TakeOne</h2>

      <div class="about-grid">
        <div class="tile" data-ignore-click="true">
          <h3 class="h3">Über uns</h3>
          <p class="muted">
            Wir sind ein junges Kreativ- und Produktionsteam aus der Region Lüneburg, Hamburg und Berlin.
            Unsere Arbeit entsteht aus praktischer Erfahrung an realen Drehs und klar strukturierten Abläufen.
            Der Fokus liegt auf sauberer Umsetzung, klarer Organisation und einer präzisen Abstimmung zwischen Idee, Inhalt und visueller Form.
          </p>
          <p class="muted" style="margin-top:.8rem;">
            Unsere Projekte entstehen aus direkter Zusammenarbeit und einem strukturierten Arbeitsprozess, der Raum für kreative Entwicklung lässt.
            Diese Seite zeigt ausgewählte Arbeiten und Projekte, die unsere Herangehensweise, Ästhetik und Arbeitsweise widerspiegeln.
          </p>
        </div>

        <div class="tile" data-ignore-click="true">
          <h3 class="h3">Arbeitsweise</h3>
          <p class="muted">
            Vorbereitung steht im Mittelpunkt unserer Arbeit. Klare Planung, saubere Abstimmung und strukturierte Abläufe bilden die Grundlage jedes Projekts, noch bevor die Kamera läuft.
            Konzepte werden präzise ausgearbeitet, Abläufe definiert und Inhalte klar ausgerichtet, um eine stimmige Umsetzung zu ermöglichen.
          </p>
          <p class="muted" style="margin-top:.8rem;">
            Kreativer Input und praktische Erfahrung fließen dabei gezielt in die Weiterentwicklung von Ideen ein.
            Die hier gezeigten Arbeiten dokumentieren diesen Prozess und geben Einblick in unsere Herangehensweise am Set.
          </p>
        </div>

        <div class="tile" data-ignore-click="true">
          <h3 class="h3">Spezialisierung</h3>
          <p class="muted">
            Die gezeigten Projekte bewegen sich in unterschiedlichen Formaten – von filmischen Arbeiten über kurze visuelle Clips bis hin zu konzeptionellen Video-Assets.
            Der Schwerpunkt liegt auf klarer Bildsprache, hochwertiger Umsetzung und einer konsistenten visuellen Handschrift.
          </p>
          <p class="muted" style="margin-top:.8rem;">
            Unabhängig vom Umfang steht stets die präzise Übersetzung der Idee in ein stimmiges visuelles Ergebnis im Vordergrund.
            Diese Galerie dient als Überblick über Arbeitsfelder, Stilrichtungen und umgesetzte Konzepte.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Minimalistischer Slider (BILDER bleiben) -->
  <section id="reel" aria-labelledby="reel-heading">
    <div class="container">
      <h2 id="reel-heading" class="visually-hidden">Auswahl aktueller Projekte</h2>

      <div class="reel-inner">
        <button class="reel-arrow reel-prev" type="button" aria-label="Vorheriger Clip">‹</button>

        <div class="reel-frame">
          <div class="reel-track">
            <div class="reel-slide is-active" data-title="Behind the scenes">
              <img class="reel-media" src="assets/521264.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_283.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/625731.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_001.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_151.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/626177.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/521452.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/625990.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_331.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/521069.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/625756.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_019.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/521112.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/626152.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_304.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/625993.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
            <div class="reel-slide" data-title="Behind the scenes">
              <img class="reel-media" src="assets/hhcity_261.jpg" alt="Behind the scenes" loading="lazy" />
            </div>
          </div>
        </div>

        <button class="reel-arrow reel-next" type="button" aria-label="Nächster Clip">›</button>
      </div>

      <div class="reel-caption">
        <span class="reel-label"></span>
        <span class="reel-title" id="reel-title"> </span>
      </div>
    </div>
  </section>

  <section id="work" aria-labelledby="work-heading">
    <div class="container">
      <h2 id="work-heading" class="h3" style="text-transform:uppercase; letter-spacing:.25em; margin-bottom:1.6rem; text-align:center; font-size:2rem;">Examples</h2>
      <p class="muted" style="text-align:center; margin-bottom:2rem;">
        Die hier gezeigten Referenzen sind nur ein paar speziell ausgewählte Produktionen, die bewusst aus unterschiedlichen Branchen stammen.
      </p>

      <div class="cards">

        <!-- 1x PICTURE-SLIDER (ein Kasten, Pfeile) -->
        <article class="tile" data-role="project" data-type="image-slider" data-full="assets/bild1.jpg">
          <div class="thumb" id="picture-slider">
            <img class="thumb-img" id="slider-img" src="assets/bild1.jpg" alt="Hamburg City - Serienpilot" loading="lazy" />
            <button class="slider-arrow slider-prev" type="button" aria-label="Vorheriges Bild">‹</button>
            <button class="slider-arrow slider-next" type="button" aria-label="Nächstes Bild">›</button>
          </div>
          <div class="body">
            <h3 class="h3 project-title" id="slider-title">Hamburg City - Serienpilot</h3>
            <p class="muted" style="margin-top:.4rem; font-size:.9rem;">Coming soon</p>
          </div>
        </article>

        <!-- VIDEO 1: Mexiko Doku -->
        <article class="tile" data-role="project" data-type="vimeo" data-hover-autoplay="true">
          <div class="thumb">
            <iframe
              class="thumb-vimeo"
              data-vimeo-id="1146349409"
              src=""
              frameborder="0"
              allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
              loading="lazy"
              title="Mexiko Dokumentarfilm"
            ></iframe>
            <div class="thumb-play" aria-hidden="true"><span>▶</span></div>
          </div>
          <div class="body">
            <h3 class="h3 project-title">Mexiko Dokumentarfilm</h3>
            <p class="muted"></p>
          </div>
        </article>

        <!-- VIDEO 2: Asseln -->
        <article class="tile" data-role="project" data-type="vimeo" data-hover-autoplay="true">
          <div class="thumb">
            <iframe
              class="thumb-vimeo"
              data-vimeo-id="1145939283"
              src=""
              frameborder="0"
              allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
              loading="lazy"
              title="Musikvideo-Asseln"
            ></iframe>
            <div class="thumb-play" aria-hidden="true"><span>▶</span></div>
          </div>
          <div class="body">
            <h3 class="h3 project-title">Musikvideo-Asseln</h3>
            <p class="muted"></p>
          </div>
        </article>

        <!-- VIDEO 3: Kaifu -->
        <article class="tile" data-role="project" data-type="vimeo" data-hover-autoplay="true">
          <div class="thumb">
            <iframe
              class="thumb-vimeo"
              data-vimeo-id="1145940546"
              src=""
              frameborder="0"
              allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
              loading="lazy"
              title="Imagefilm-Kaifu"
            ></iframe>
            <div class="thumb-play" aria-hidden="true"><span>▶</span></div>
          </div>
          <div class="body">
            <h3 class="h3 project-title">Imagefilm-Kaifu</h3>
            <p class="muted"></p>
          </div>
        </article>

      </div>
    </div>
  </section>

  <section id="contact" aria-labelledby="contact-heading">
    <div class="container contact-bar">
      <h2 id="contact-heading" class="visually-hidden">Kontakt</h2>
      <span>Email: <a href="#" id="email-footer" aria-label="E-Mail-Adresse">info [at] takeonepictures [dot] com</a></span>
      <span>Instagram: <a href="https://www.instagram.com/take_one_pictures_/" target="_blank" rel="noopener">@take_one_pictures_</a></span>
    </div>
  </section>
</main>

<footer>
  <div class="container footer-bar">
    © <span id="year"></span> David Bals • <a href="impressum.html">Impressum</a> • <a href="datenschutz.html">Datenschutz</a>
  </div>
</footer>

<!-- Modal: Video + Bild -->
<div id="player-modal" class="modal hidden" aria-modal="true" role="dialog" aria-labelledby="modal-title">
  <div class="modal-inner">
    <div class="modal-header">
      <div class="modal-title" id="modal-title">Projekt</div>
      <button class="modal-close" type="button" aria-label="Schließen">&times;</button>
    </div>

    <div class="modal-media">
      <iframe
        id="modal-vimeo"
        src=""
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen
        style="display:none;"
        title="Projekt Video"
      ></iframe>

      <img
        id="modal-image"
        src=""
        alt=""
        style="display:none;"
      />

      <button class="modal-nav modal-prev" type="button" aria-label="Vorheriges Bild">‹</button>
      <button class="modal-nav modal-next" type="button" aria-label="Nächstes Bild">›</button>
    </div>
  </div>
</div>

<script>
  /* redeploy-marker: 2025-12-15 */
  let mediaActivated = false;
  const vimeoPlayers = new Map();
  const HERO_READY_TIMEOUT = 5000;
  let heroReady = false;
  let heroReadyFallback = null;
  const heroReadyWaiters = [];
  const SLIDER_DEFAULT_TITLE = "Hamburg City - Serienpilot";
  const sliderImages = [
    { src: "assets/bild4.jpg", title: SLIDER_DEFAULT_TITLE },
    { src: "assets/bild2.jpg", title: SLIDER_DEFAULT_TITLE },
    { src: "assets/bild1.jpg", title: SLIDER_DEFAULT_TITLE },
    { src: "assets/bild3.jpg", title: SLIDER_DEFAULT_TITLE },
    { src: "assets/bild5.jpg", title: SLIDER_DEFAULT_TITLE },
    { src: "assets/bild66w.jpg", title: SLIDER_DEFAULT_TITLE }
  ];

  function signalHeroReady(){
    if (heroReady) return;
    heroReady = true;
    if (heroReadyFallback){
      clearTimeout(heroReadyFallback);
      heroReadyFallback = null;
    }
    heroReadyWaiters.splice(0).forEach(fn => fn());
  }

  function waitForHeroReady(){
    if (heroReady) return Promise.resolve();
    return new Promise(resolve => heroReadyWaiters.push(resolve));
  }

  function getVimeoPlayer(iframe){
    if (!iframe) return null;
    if (vimeoPlayers.has(iframe)) return vimeoPlayers.get(iframe);
    const p = new Vimeo.Player(iframe);
    vimeoPlayers.set(iframe, p);

    try{
      p.on('error', (err) => {
        const id = iframe?.dataset?.vimeoId || '(unknown)';
        console.warn('[Vimeo ERROR]', id, err);
      });
    } catch(e){}

    return p;
  }

  function buildVimeoSrc(id, mode){
    const base = `https://player.vimeo.com/video/${id}`;
    const common = `byline=0&title=0&portrait=0&dnt=1&playsinline=1&autopause=0`;

    if (mode === 'hero'){
      return `${base}?background=1&autoplay=1&muted=1&loop=1&${common}`;
    }

    return `${base}?background=1&autoplay=0&muted=0&loop=1&${common}`;
  }

  function setThumbVimeoSrc(){
    document.querySelectorAll('.thumb-vimeo').forEach(ifr => {
      const id = ifr.dataset.vimeoId;
      if (id && !id.startsWith('REPLACE')) ifr.src = buildVimeoSrc(id, 'thumb');
    });
  }

  function markHeroPlayingFast(){
    const heroWrap = document.getElementById('hero-media');
    const heroIframe = document.getElementById('vimeo-hero');
    if (!heroWrap || !heroIframe || !window.Vimeo) return;

    const heroPlayer = getVimeoPlayer(heroIframe);
    if (heroPlayer){
      heroPlayer.setAutopause(false).catch(()=>{});
      heroPlayer.on('pause', () => {
        heroPlayer.play().catch(()=>{});
      });
    }

    function setHeroVisible(){
      if (!heroWrap.classList.contains('is-playing')){
        heroWrap.classList.add('is-playing');
      }
      signalHeroReady();
    }

    heroPlayer.on('playing', setHeroVisible);
    heroPlayer.on('loaded', () => {
      setTimeout(setHeroVisible, 450);
    });

    heroPlayer.play().catch(()=>{});
    window.addEventListener('load', () => {
      heroPlayer.play().catch(()=>{});
    });
  }

  function activateAllMedia(){
    if (mediaActivated) return;
    mediaActivated = true;

    setThumbVimeoSrc();

    document.querySelectorAll('.thumb-vimeo').forEach(ifr => {
      const id = ifr.dataset.vimeoId;
      if (!id || id.startsWith('REPLACE')) return;
      const p = getVimeoPlayer(ifr);
      p && p.setVolume(1).catch(()=>{});
      p && p.setMuted(false).catch(()=>{});
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const root = document.documentElement;
    function resetScrollTop(){
      const prevBehavior = root.style.scrollBehavior;
      root.style.scrollBehavior = 'auto';
      window.scrollTo({ top:0, left:0, behavior:'auto' });
      root.scrollTop = 0;
      document.body.scrollTop = 0;
      requestAnimationFrame(() => {
        root.style.scrollBehavior = prevBehavior;
      });
    }

    const introScreen = document.getElementById('intro-screen');
    const introBtn = document.getElementById('intro-start');
    const LOADER_MIN_MS = 1900;
    const loaderProgressEl = document.getElementById('loader-progress');
    const loaderCircle = document.querySelector('.circle-loader');
    let loaderProgressFrame = null;
    let introFinished = false;

    function updateLoaderVisual(value){
      const percent = Math.max(0, Math.min(100, Math.round(value)));
      if (loaderProgressEl) loaderProgressEl.textContent = `${percent}%`;
      if (loaderCircle) loaderCircle.style.setProperty('--progress', percent);
    }

    function beginLoaderProgress(duration = LOADER_MIN_MS){
      if (loaderProgressFrame) cancelAnimationFrame(loaderProgressFrame);
      const start = performance.now();

      const step = (now) => {
        const pct = Math.min(100, Math.round(((now - start) / duration) * 100));
        updateLoaderVisual(pct);
        if (pct < 100){
          loaderProgressFrame = requestAnimationFrame(step);
        } else {
          loaderProgressFrame = null;
        }
      };

      loaderProgressFrame = requestAnimationFrame(step);
    }

    function finalizeLoaderProgress(){
      if (loaderProgressFrame) cancelAnimationFrame(loaderProgressFrame);
      loaderProgressFrame = null;
      updateLoaderVisual(100);
    }

    updateLoaderVisual(0);

    if (!heroReadyFallback){
      heroReadyFallback = setTimeout(signalHeroReady, HERO_READY_TIMEOUT);
    }

    function startExperience(){
      if (introFinished) return;
      introFinished = true;
      resetScrollTop();
      if (introScreen){
        introScreen.classList.add('loading');
        introScreen.setAttribute('aria-busy', 'true');
      }
      beginLoaderProgress(LOADER_MIN_MS);
      const startTime = performance.now();
      waitForHeroReady().then(() => {
        const elapsed = performance.now() - startTime;
        const remaining = Math.max(0, LOADER_MIN_MS - elapsed);
        setTimeout(() => {
          finalizeLoaderProgress();
          if (introScreen){
            introScreen.classList.add('hidden');
            introScreen.setAttribute('aria-hidden', 'true');
          }
          document.body.classList.remove('locked');
          activateAllMedia();
        }, remaining);
      });
    }

    if (introBtn) introBtn.addEventListener('click', startExperience);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !introFinished) startExperience();
    });
    if (!introBtn) startExperience();

    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    (function(){
      const el = document.getElementById("email-footer");
      if (!el) return;
      el.textContent = "info [at] takeonepictures [dot] com";
      el.addEventListener("click", function (e) {
        e.preventDefault();
        const parts = ["info", "takeonepictures", "com"];
        const email = `${parts[0]}@${parts[1]}.${parts[2]}`;
        window.location.href = `mailto:${email}`;
      });
    })();

    const header = document.querySelector('header');
    const hero = document.querySelector('.hero');
    const menuToggle = document.querySelector('.menu-toggle');
    const menuPanel = document.querySelector('.menu-panel');
    const panelLinks = menuPanel ? menuPanel.querySelectorAll('a') : [];

    markHeroPlayingFast();

    function handleScroll(){
      if (!hero || !header) return;
      const heroRect = hero.getBoundingClientRect();
      const heroBottomViewport = heroRect.bottom;
      const trigger = 80;

      if (heroBottomViewport <= trigger){
        header.classList.add('nav-compact');
      } else {
        header.classList.remove('nav-compact');
        header.classList.remove('menu-open');
        if (menuToggle) menuToggle.setAttribute('aria-expanded', 'false');
      }
    }

    window.addEventListener('scroll', handleScroll, { passive:true });
    handleScroll();

    if (menuToggle && header && menuPanel) {
      menuToggle.setAttribute('aria-controls', 'menu-panel');
      menuToggle.addEventListener('click', () => {
        const isOpen = header.classList.toggle('menu-open');
        menuToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      });
    }

    panelLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (!header) return;
        header.classList.remove('menu-open');
        if (menuToggle) menuToggle.setAttribute('aria-expanded', 'false');
      });
    });

    const dotsMenu = document.querySelector('.menu-dots');
    const dotsButton = dotsMenu ? dotsMenu.querySelector('button') : null;
    const dotsLinks = dotsMenu ? dotsMenu.querySelectorAll('.menu-dots-menu a') : [];

    function closeDotsMenu(){
      if (!dotsMenu || !dotsButton) return;
      dotsMenu.classList.remove('is-open');
      dotsButton.setAttribute('aria-expanded', 'false');
    }

    if (dotsButton && dotsMenu){
      dotsButton.addEventListener('click', (event) => {
        event.preventDefault();
        const isOpen = dotsMenu.classList.toggle('is-open');
        dotsButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      });

      dotsLinks.forEach(link => {
        link.addEventListener('click', () => closeDotsMenu());
      });

      document.addEventListener('click', (event) => {
        if (!dotsMenu.contains(event.target)) closeDotsMenu();
      });

      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') closeDotsMenu();
      });
    }

    const reelTrack = document.querySelector('.reel-track');
    const reelSlides = reelTrack ? reelTrack.querySelectorAll('.reel-slide') : [];
    const reelPrev = document.querySelector('.reel-prev');
    const reelNext = document.querySelector('.reel-next');
    const reelTitleEl = document.getElementById('reel-title');

    const reelTitles = Array.from(reelSlides).map(slide => slide.getAttribute('data-title') || '');
    const reelImageData = Array.from(reelSlides).map(slide => {
      const img = slide.querySelector('.reel-media');
      return {
        src: img ? img.getAttribute('src') : '',
        title: slide.getAttribute('data-title') || (img ? img.getAttribute('alt') : '') || 'Behind the scenes'
      };
    });
    let reelIndex = 0;

    function updateReel(delta = 0){
      if (!reelTrack || !reelSlides.length) return;
      reelIndex = (reelIndex + delta + reelSlides.length) % reelSlides.length;
      const offset = reelIndex * -100;
      reelTrack.style.transform = `translateX(${offset}%)`;
      reelSlides.forEach((slide, idx) => slide.classList.toggle('is-active', idx === reelIndex));
      if (reelTitleEl && reelTitles[reelIndex]) reelTitleEl.textContent = reelTitles[reelIndex];
    }

    if (reelPrev) reelPrev.addEventListener('click', () => updateReel(-1));
    if (reelNext) reelNext.addEventListener('click', () => updateReel(1));
    updateReel(0);

    reelSlides.forEach((slide, idx) => {
      slide.addEventListener('click', () => {
        if (!reelImageData.length) return;
        openSliderModal(idx, reelImageData);
      });
    });

    (function(){
      const images = sliderImages;
      if (!images.length) return;

      let idx = 0;
      const imgEl = document.getElementById("slider-img");
      const titleEl = document.getElementById("slider-title");
      const prev = document.querySelector("#picture-slider .slider-prev");
      const next = document.querySelector("#picture-slider .slider-next");
      const tile = document.querySelector('article.tile[data-type="image-slider"]');

      function render(){
        if (!imgEl) return;
        const current = images[idx];
        imgEl.src = current.src;
        if (titleEl) titleEl.textContent = current.title || SLIDER_DEFAULT_TITLE;
        if (tile){
          tile.setAttribute("data-full", current.src);
          tile.setAttribute("data-current-index", idx);
        }
      }

      function step(d){
        idx = (idx + d + images.length) % images.length;
        render();
      }

      if (prev) prev.addEventListener("click", (e)=>{ e.stopPropagation(); step(-1); });
      if (next) next.addEventListener("click", (e)=>{ e.stopPropagation(); step(+1); });

      render();
    })();

    const modal = document.getElementById('player-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalVimeo = document.getElementById('modal-vimeo');
    const modalImage = document.getElementById('modal-image');
    const closeBtn = document.querySelector('.modal-close');
    const modalPrev = document.querySelector('.modal-prev');
    const modalNext = document.querySelector('.modal-next');
    let modalSliderIndex = null;
    let modalSliderSource = null;

    function openVimeo(vimeoId, title) {
      if (!mediaActivated) activateAllMedia();
      modalTitle.textContent = title || 'Projekt';

      modalSliderIndex = null;
      modal.classList.remove('has-image-slider');

      modalImage.style.display = 'none';
      modalImage.src = '';

      modalVimeo.style.display = 'block';
      modalVimeo.src = `https://player.vimeo.com/video/${vimeoId}?autoplay=1&muted=0&loop=0&title=0&byline=0&portrait=0&dnt=1&playsinline=1&autopause=0`;

      modal.classList.remove('hidden');
    }

    function openImage(src, title, options = {}) {
      const sliderMode = Boolean(options.sliderMode);
      modalTitle.textContent = title || 'Projekt';

      modalVimeo.style.display = 'none';
      modalVimeo.src = '';

      modalImage.style.display = 'block';
      modalImage.src = src;

      if (sliderMode){
        modal.classList.add('has-image-slider');
      } else {
        modal.classList.remove('has-image-slider');
        modalSliderIndex = null;
      }

      modal.classList.remove('hidden');
    }

    function openSliderModal(startIndex = 0, sourceImages = sliderImages){
      const activeImages = (Array.isArray(sourceImages) && sourceImages.length) ? sourceImages : sliderImages;
      if (!activeImages.length) return;
      modalSliderSource = activeImages;
      modalSliderIndex = (startIndex + modalSliderSource.length) % modalSliderSource.length;
      const current = modalSliderSource[modalSliderIndex];
      openImage(current.src, current.title || SLIDER_DEFAULT_TITLE, { sliderMode:true });
    }

    function stepModalSlider(delta){
      if (modalSliderIndex === null || !modalSliderSource || !modalSliderSource.length) return;
      modalSliderIndex = (modalSliderIndex + delta + modalSliderSource.length) % modalSliderSource.length;
      const current = modalSliderSource[modalSliderIndex];
      modalTitle.textContent = current.title || SLIDER_DEFAULT_TITLE;
      if (modalImage) modalImage.src = current.src;
    }

    function closePlayer() {
      modalVimeo.src = '';
      modalImage.src = '';
      modalSliderIndex = null;
      modalSliderSource = null;
      modal.classList.remove('has-image-slider');
      modal.classList.add('hidden');
    }

    const projectTiles = document.querySelectorAll('article.tile[data-role="project"]');
    projectTiles.forEach(tile => {
      tile.addEventListener('click', () => {
        const titleEl = tile.querySelector('.project-title');
        const title = titleEl ? titleEl.textContent.trim() : 'Projekt';
        const type = tile.getAttribute('data-type');

        if (type === 'vimeo') {
          const iframe = tile.querySelector('.thumb-vimeo');
          const vimeoId = iframe ? iframe.getAttribute('data-vimeo-id') : null;
          if (vimeoId && !vimeoId.startsWith('REPLACE')) openVimeo(vimeoId, title);
          return;
        }

        if (type === 'image-slider') {
          const currentIndex = parseInt(tile.getAttribute('data-current-index') || '0', 10);
          if (sliderImages.length && !Number.isNaN(currentIndex)){
            openSliderModal(currentIndex, sliderImages);
          } else {
            const full = tile.getAttribute('data-full');
            if (full) openImage(full, title);
          }
          return;
        }
      });
    });

    if (modalPrev) {
      modalPrev.addEventListener('click', (e) => {
        e.stopPropagation();
        stepModalSlider(-1);
      });
    }

    if (modalNext) {
      modalNext.addEventListener('click', (e) => {
        e.stopPropagation();
        stepModalSlider(1);
      });
    }

    if (closeBtn) {
      closeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        closePlayer();
      });
    }

    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closePlayer();
      });
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal && !modal.classList.contains('hidden')) closePlayer();
    });
  });
</script>

</body>
</html>
